<!doctype html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="style.css" />
  <link rel="stylesheet" type="text/css" href="../style.css" />
  <title>Granule documentation - Primitives</title>
</head>
<body>
<div id="navigator">
  <b>Modules</b><br /><br />
<a href='../index.html'><i>Top-level</i><br /></a><ul><li><a href='Primitives.html'>Primitives</a></li><br /><li><a href='Bool.html'>Bool</a></li><li><a href='Cake.html'>Cake</a></li><li><a href='Choice.html'>Choice</a></li><li><a href='Coffee.html'>Coffee</a></li><li><a href='Either.html'>Either</a></li><li><a href='Existential.html'>Existential</a></li><li><a href='File.html'>File</a></li><li><a href='Fin.html'>Fin</a></li><li><a href='Fix.html'>Fix</a></li><li><a href='Graph.html'>Graph</a></li><li><a href='List.html'>List</a></li><li><a href='Maybe.html'>Maybe</a></li><li><a href='Nat.html'>Nat</a></li><li><a href='Parallel.html'>Parallel</a></li><li><a href='Prelude.html'>Prelude</a></li><li><a href='Result.html'>Result</a></li><li><a href='Stack.html'>Stack</a></li><li><a href='State.html'>State</a></li><li><a href='Vec.html'>Vec</a></li></ul>
</div>
<div id="content">
  <div id="logo">
    <img src="../images/gr-blue.png" />
  </div>
  <b>Built-in primitives</b><br /><br />
<section><h2>Meta-data</h2><ul><li><b>Description</b>: Built-in primitive definitions</li></ul></section><section><h2>Contents</h2><section><div class='mininav'><ul><li><a href='#builtintypes'>Built-in Types</a></li><li><a href='#corelinearfunctionalcombinators'> Core linear functional combinators</a></li><li><a href='#arithmetic'> Arithmetic</a></li><li><a href='#gradedpossiblity'> Graded Possiblity</a></li><li><a href='#algebraiceffectsandhandlers'> Algebraic effects and handlers</a></li><li><a href='#io'> I/O</a></li><li><a href='#exceptions'> Exceptions</a></li><li><a href='#conversions'> Conversions</a></li><li><a href='#concurrencyandsessiontypes'> Concurrency and Session Types</a></li><li><a href='#nonlinearcommunicationandconcurrencypatterns'> Non-linear communication and concurrency patterns</a></li><li><a href='#concurrencyprimitivesusingsideeffects'> Concurrency primitives using side effects</a></li><li><a href='#filehandles'> File Handles</a></li><li><a href='#char'> Char</a></li><li><a href='#stringmanipulation'> String manipulation</a></li><li><a href='#cost'> Cost</a></li><li><a href='#uniquenessmodality'> Uniqueness modality</a></li><li><a href='#mutablearrayoperations'> Mutable array operations</a></li><li><a href='#imuutablearrayoperations'> Imuutable array operations</a></li><li><a href='#benchmarking'> Benchmarking</a></li><li><a href='#sensitivity'> Sensitivity</a></li></ul></div></section><a name = builtintypes><h3><a href='#' class='toplink'>[top]</a>Built-in Types</h3></a><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Type</span> : <span class='constName'>Type 1</span> <span class='keyword'>where</span>
    Coeffect       : <span class='constName'>Type</span>
  ; Effect         : <span class='constName'>Type</span>
  ; Guarantee      : <span class='constName'>Type</span>
  ; Permission     : <span class='constName'>Type</span>
  ; Predicate      : <span class='constName'>Type</span>
  ; ->             : <span class='constName'>Type</span> -> <span class='constName'>Type</span> -> <span class='constName'>Type</span>
  ; Int            : <span class='constName'>Type</span>
  ; Float          : <span class='constName'>Type</span>
  ; DFloat         : <span class='constName'>Type</span>
  ; Char           : <span class='constName'>Type</span>
  ; Void           : <span class='constName'>Type</span>
  ; String         : <span class='constName'>Type</span>
  ; Inverse        : <span class='constName'>Type</span> -> <span class='constName'>Type</span>
  ; Protocol       : <span class='constName'>Type</span>
  ; Rename         : <span class='constName'>Name</span> -> <span class='constName'>Type</span> -> <span class='constName'>Type</span>
  ; Chan           : <span class='constName'>Protocol</span> -> <span class='constName'>Type</span>
  ; LChan          : <span class='constName'>Protocol</span> -> <span class='constName'>Type</span>
  ; Name           : <span class='constName'>Type</span> -> <span class='constName'>Type</span>
  ; FloatArray     : <span class='constName'>Name</span> -> <span class='constName'>Type</span>
  ; Ref            : <span class='constName'>Name</span> -> <span class='constName'>Type</span> -> <span class='constName'>Type</span>
  ; CapabilityType : <span class='constName'>Capability</span> -> <span class='constName'>Type</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Coeffect</span> : <span class='constName'>Type</span> <span class='keyword'>where</span>
    ,,        : <span class='constName'>Coeffect</span> -> <span class='constName'>Coeffect</span> -> <span class='constName'>Coeffect</span>
  ; Nat       : <span class='constName'>Coeffect</span>
  ; Q         : <span class='constName'>Coeffect</span>
  ; OOZ       : <span class='constName'>Coeffect</span>
  ; LNL       : <span class='constName'>Coeffect</span>
  ; Set       : <span class='constName'>Type</span> -> <span class='constName'>Coeffect</span>
  ; SetOp     : <span class='constName'>Type</span> -> <span class='constName'>Coeffect</span>
  ; Cartesian : <span class='constName'>Coeffect</span>
  ; Sec       : <span class='constName'>Coeffect</span>
  ; Interval  : <span class='constName'>Coeffect</span> -> <span class='constName'>Coeffect</span>
  ; Ext       : <span class='constName'>Coeffect</span> -> <span class='constName'>Coeffect</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Effect</span> : <span class='constName'>Type</span> <span class='keyword'>where</span>
    Com        : <span class='constName'>Effect</span>
  ; IO         : <span class='constName'>Effect</span>
  ; Exception  : <span class='constName'>Effect</span>
  ; GradedFree : (eff : <span class='constName'>Effect</span>) -> (eff -> <span class='constName'>Type</span> -> <span class='constName'>Type</span>) -> <span class='constName'>Effect</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Guarantee</span> : <span class='constName'>Type</span> <span class='keyword'>where</span>
    Uniqueness : <span class='constName'>Guarantee</span>
  ; Integrity  : <span class='constName'>Guarantee</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Permission</span> : <span class='constName'>Type</span> <span class='keyword'>where</span>
    Fraction : <span class='constName'>Permission</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Predicate</span> : <span class='constName'>Type</span> <span class='keyword'>where</span>
    Dropable       : <span class='constName'>Type</span> -> <span class='constName'>Predicate</span>
  ; Cloneable      : <span class='constName'>Type</span> -> <span class='constName'>Predicate</span>
  ; ExactSemiring  : <span class='constName'>Semiring</span> -> <span class='constName'>Predicate</span>
  ; Mutable        : <span class='constName'>Fraction</span> -> <span class='constName'>Predicate</span>
  ; NonInterfering : <span class='constName'>Coeffect</span> -> <span class='constName'>Predicate</span>
  ; SingleAction   : <span class='constName'>Protocol</span> -> <span class='constName'>Predicate</span>
  ; ReceivePrefix  : <span class='constName'>Protocol</span> -> <span class='constName'>Predicate</span>
  ; Sends          : <span class='constName'>Nat</span> -> <span class='constName'>Protocol</span> -> <span class='constName'>Predicate</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Protocol</span> : <span class='constName'>Type</span> <span class='keyword'>where</span>
    Graded : <span class='constName'>Nat</span> -> <span class='constName'>Protocol</span> -> <span class='constName'>Protocol</span>
  ; Send   : <span class='constName'>Type</span> -> <span class='constName'>Protocol</span> -> <span class='constName'>Protocol</span>
  ; Recv   : <span class='constName'>Type</span> -> <span class='constName'>Protocol</span> -> <span class='constName'>Protocol</span>
  ; End    : <span class='constName'>Protocol</span>
  ; Select : <span class='constName'>Protocol</span> -> <span class='constName'>Protocol</span> -> <span class='constName'>Protocol</span>
  ; Offer  : <span class='constName'>Protocol</span> -> <span class='constName'>Protocol</span> -> <span class='constName'>Protocol</span>
  ; Dual   : <span class='constName'>Protocol</span> -> <span class='constName'>Protocol</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>LNL</span> : <span class='constName'>Coeffect</span> <span class='keyword'>where</span>
    Zero : <span class='constName'>LNL</span>
  ; One  : <span class='constName'>LNL</span>
  ; Many : <span class='constName'>LNL</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Cartesian</span> : <span class='constName'>Coeffect</span> <span class='keyword'>where</span>
    Any : <span class='constName'>Cartesian</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Sec</span> : <span class='constName'>Coeffect</span> <span class='keyword'>where</span>
    Hi : <span class='constName'>Sec</span>
  ; Lo : <span class='constName'>Sec</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Uniqueness</span> : <span class='constName'>Guarantee</span> <span class='keyword'>where</span>
    Unique : <span class='constName'>Uniqueness</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Fraction</span> : <span class='constName'>Permission</span> <span class='keyword'>where</span>
    Star : <span class='constName'>Fraction</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Integrity</span> : <span class='constName'>Guarantee</span> <span class='keyword'>where</span>
    Trusted : <span class='constName'>Integrity</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Exception</span> : <span class='constName'>Effect</span> <span class='keyword'>where</span>
    Success : <span class='constName'>Exception</span>
  ; MayFail : <span class='constName'>Exception</span></pre></div><br /><a name = corelinearfunctionalcombinators><h3><a href='#' class='toplink'>[top]</a> Core linear functional combinators</h3></a><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>()</span> <span class='keyword'>where</span>
    () </pre></div><div class='desc'> Unit type</div><div class='code'><pre>use : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>} 
    . a -> a [<span class='coeff'>1</span>]</pre></div><div class='desc'> Allows a linear variable to be promoted to a graded modality specifying an exact usage of 1</div><div class='code'><pre>compose : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, b : <span class='constName'>Type</span>, c : <span class='constName'>Type</span>} 
        . (b -> c) -> (a -> b) -> a -> c</pre></div><div class='desc'> Linear function composition</div><a name = arithmetic><h3><a href='#' class='toplink'>[top]</a> Arithmetic</h3></a><div class='code'><pre>div : <span class='constName'>Int</span> -> <span class='constName'>Int</span> -> <span class='constName'>Int</span></pre></div><div class='desc'> Integer division</div><a name = gradedpossiblity><h3><a href='#' class='toplink'>[top]</a> Graded Possiblity</h3></a><div class='code'><pre>pure : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>} 
     . a -> a <<span class='eff'><span class='constName'>Pure</span></span>></pre></div><div class='desc'> Inject into a computation for any graded monad</div><div class='code'><pre>fromPure : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>} 
         . (a <<span class='eff'><span class='constName'>Pure</span></span>>) -> a</pre></div><div class='desc'> Extract form a pure computation</div><a name = algebraiceffectsandhandlers><h3><a href='#' class='toplink'>[top]</a> Algebraic effects and handlers</h3></a><div class='code'><pre>call : <span class='keyword'>forall</span> {eff : <span class='constName'>Effect</span>, s : <span class='constName'>Coeffect</span>, grd : s, i : <span class='constName'>Type</span>, o : <span class='constName'>Type</span>, r : <span class='constName'>Type</span>, sig : eff -> <span class='constName'>Type</span> -> <span class='constName'>Type</span>, e : eff} 
     . (i -> ((o -> r) [<span class='coeff'>grd</span>]) -> sig e r) -> i -> o <<span class='eff'><span class='constName'>Eff</span> eff sig e</span>></pre></div><div class='desc'> Lift a CPS-style effect operation to direct-style, also called the "generic effect" operation</div><div class='code'><pre>handle : <span class='keyword'>forall</span> {eff : <span class='constName'>Effect</span>, sig : eff -> <span class='constName'>Type</span> -> <span class='constName'>Type</span>, a : <span class='constName'>Type</span>, b : <span class='constName'>Type</span>, e : eff} 
       . (fmap : (<span class='keyword'>forall</span> {a : <span class='constName'>Type</span>} . <span class='keyword'>forall</span> {b : <span class='constName'>Type</span>} . <span class='keyword'>forall</span> {l : eff} . ((a -> b) [<span class='coeff'>0..<span class='constName'>∞</span></span>]) -> (sig l a) -> sig l b) [<span class='coeff'>0..<span class='constName'>∞</span></span>]) -> ((<span class='keyword'>forall</span> {l : eff} . (sig l b) -> b) [<span class='coeff'>0..<span class='constName'>∞</span></span>]) -> (a -> b) -> (a <<span class='eff'><span class='constName'>Eff</span> eff sig e</span>>) -> b</pre></div><div class='desc'> Deploy an effect handler on a computation tree</div><div class='code'><pre>handleGr : <span class='keyword'>forall</span> {eff : <span class='constName'>Effect</span>, sig : eff -> <span class='constName'>Type</span> -> <span class='constName'>Type</span>, a : <span class='constName'>Type</span>, b : eff -> <span class='constName'>Type</span>, e : eff} 
         . (fmap : (<span class='keyword'>forall</span> {a : <span class='constName'>Type</span>} . <span class='keyword'>forall</span> {b : <span class='constName'>Type</span>} . <span class='keyword'>forall</span> {l : eff} . ((a -> b) [<span class='coeff'>0..<span class='constName'>∞</span></span>]) -> (sig l a) -> sig l b) [<span class='coeff'>0..<span class='constName'>∞</span></span>]) -> (<span class='keyword'>forall</span> {l : eff} . (<span class='keyword'>forall</span> {j : eff} . (sig l (b j)) -> b (l * j)) [<span class='coeff'>0..<span class='constName'>∞</span></span>]) -> (a -> b ((1 : eff))) -> (a <<span class='eff'><span class='constName'>Eff</span> eff sig e</span>>) -> b e</pre></div><div class='desc'> Deploy an effect handler on a computation tree for a graded algebra</div><a name = io><h3><a href='#' class='toplink'>[top]</a> I/O</h3></a><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>IOElem</span> <span class='keyword'>where</span>
    Stdout 
  ; Stdin 
  ; Stderr 
  ; Open 
  ; Read 
  ; Write 
  ; IOExcept 
  ; Close </pre></div><div class='desc'> IO effect operation information</div><div class='code'><pre>fromStdin : <span class='constName'>String</span> <<span class='eff'>{<span class='constName'>Stdin</span>}</span>></pre></div><div class='desc'> Read from standard input</div><div class='code'><pre>toStdout : <span class='constName'>String</span> -> <span class='constName'>()</span> <<span class='eff'>{<span class='constName'>Stdout</span>}</span>></pre></div><div class='desc'> Write to standard output</div><div class='code'><pre>toStderr : <span class='constName'>String</span> -> <span class='constName'>()</span> <<span class='eff'>{<span class='constName'>Stderr</span>}</span>></pre></div><div class='desc'> Write to standard output</div><a name = exceptions><h3><a href='#' class='toplink'>[top]</a> Exceptions</h3></a><div class='code'><pre>throw : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, k : <span class='constName'>Coeffect</span>} 
      . (a [<span class='coeff'>(0 : k)</span>]) <<span class='eff'><span class='constName'>MayFail</span></span>></pre></div><br /><a name = conversions><h3><a href='#' class='toplink'>[top]</a> Conversions</h3></a><div class='code'><pre>showChar : <span class='constName'>Char</span> -> <span class='constName'>String</span></pre></div><br /><div class='code'><pre>intToFloat : <span class='constName'>Int</span> -> <span class='constName'>Float</span></pre></div><br /><div class='code'><pre>showInt : <span class='constName'>Int</span> -> <span class='constName'>String</span></pre></div><br /><div class='code'><pre>showFloat : <span class='constName'>Float</span> -> <span class='constName'>String</span></pre></div><br /><div class='code'><pre>readInt : <span class='constName'>String</span> -> <span class='constName'>Int</span></pre></div><br /><a name = concurrencyandsessiontypes><h3><a href='#' class='toplink'>[top]</a> Concurrency and Session Types</h3></a><div class='code'><pre>forkLinear : <span class='keyword'>forall</span> {s : <span class='constName'>Protocol</span>} 
           . ((<span class='constName'>LChan</span> s) -> <span class='constName'>()</span>) -> <span class='constName'>LChan</span> (<span class='constName'>Dual</span> s)</pre></div><br /><div class='code'><pre>send : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, s : <span class='constName'>Protocol</span>} 
     . (<span class='constName'>LChan</span> (<span class='constName'>Send</span> a s)) -> a -> <span class='constName'>LChan</span> s</pre></div><br /><div class='code'><pre>recv : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, s : <span class='constName'>Protocol</span>} 
     . (<span class='constName'>LChan</span> (<span class='constName'>Recv</span> a s)) -> (a, <span class='constName'>LChan</span> s)</pre></div><br /><div class='code'><pre>close : (<span class='constName'>LChan</span> <span class='constName'>End</span>) -> <span class='constName'>()</span></pre></div><br /><div class='code'><pre>selectLeft : <span class='keyword'>forall</span> {p1 : <span class='constName'>Protocol</span>, p2 : <span class='constName'>Protocol</span>} 
           . (<span class='constName'>LChan</span> (<span class='constName'>Select</span> p1 p2)) -> <span class='constName'>LChan</span> p1</pre></div><br /><div class='code'><pre>selectRight : <span class='keyword'>forall</span> {p1 : <span class='constName'>Protocol</span>, p2 : <span class='constName'>Protocol</span>} 
            . (<span class='constName'>LChan</span> (<span class='constName'>Select</span> p1 p2)) -> <span class='constName'>LChan</span> p2</pre></div><br /><div class='code'><pre>offer : <span class='keyword'>forall</span> {p1 : <span class='constName'>Protocol</span>, p2 : <span class='constName'>Protocol</span>, a : <span class='constName'>Type</span>} 
      . ((<span class='constName'>LChan</span> p1) -> a) -> ((<span class='constName'>LChan</span> p2) -> a) -> (<span class='constName'>LChan</span> (<span class='constName'>Offer</span> p1 p2)) -> a</pre></div><br /><a name = nonlinearcommunicationandconcurrencypatterns><h3><a href='#' class='toplink'>[top]</a> Non-linear communication and concurrency patterns</h3></a><div class='code'><pre>forkNonLinear : <span class='keyword'>forall</span> {p : <span class='constName'>Protocol</span>, s : <span class='constName'>Coeffect</span>, r : s} 
              . {<span class='constName'>SingleAction</span> p, <span class='constName'>ExactSemiring</span> s} =>
    (((<span class='constName'>LChan</span> p) [<span class='coeff'>r</span>]) -> <span class='constName'>()</span>) -> (<span class='constName'>LChan</span> (<span class='constName'>Dual</span> p)) [<span class='coeff'>r</span>]</pre></div><br /><div class='code'><pre>forkMulticast : <span class='keyword'>forall</span> {p : <span class='constName'>Protocol</span>, n : <span class='constName'>Nat</span>} 
              . {<span class='constName'>Sends</span> p} =>
    ((<span class='constName'>LChan</span> (<span class='constName'>Graded</span> n p)) -> <span class='constName'>()</span>) -> (<span class='constName'>N</span> n) -> <span class='constName'>Vec</span> n (<span class='constName'>LChan</span> (<span class='constName'>Dual</span> p))</pre></div><br /><div class='code'><pre>forkReplicate : <span class='keyword'>forall</span> {p : <span class='constName'>Protocol</span>, n : <span class='constName'>Nat</span>} 
              . {<span class='constName'>ReceivePrefix</span> p} =>
    (((<span class='constName'>LChan</span> p) -> <span class='constName'>()</span>) [<span class='coeff'>0..n</span>]) -> (<span class='constName'>N</span> n) -> <span class='constName'>Vec</span> n ((<span class='constName'>LChan</span> (<span class='constName'>Dual</span> p)) [<span class='coeff'>0..1</span>])</pre></div><br /><div class='code'><pre>forkReplicateExactly : <span class='keyword'>forall</span> {p : <span class='constName'>Protocol</span>, n : <span class='constName'>Nat</span>} 
                     . {<span class='constName'>ReceivePrefix</span> p} =>
    (((<span class='constName'>LChan</span> p) -> <span class='constName'>()</span>) [<span class='coeff'>n</span>]) -> (<span class='constName'>N</span> n) -> <span class='constName'>Vec</span> n (<span class='constName'>LChan</span> (<span class='constName'>Dual</span> p))</pre></div><br /><a name = concurrencyprimitivesusingsideeffects><h3><a href='#' class='toplink'>[top]</a> Concurrency primitives using side effects</h3></a><div class='code'><pre>fork : <span class='keyword'>forall</span> {s : <span class='constName'>Protocol</span>, k : <span class='constName'>Coeffect</span>, c : k} 
     . {<span class='constName'>SingleAction</span> s, <span class='constName'>ExactSemiring</span> k} =>
    (((<span class='constName'>Chan</span> s) [<span class='coeff'>c</span>]) -> <span class='constName'>()</span> <<span class='eff'><span class='constName'>Session</span></span>>) -> ((<span class='constName'>Chan</span> (<span class='constName'>Dual</span> s)) [<span class='coeff'>c</span>]) <<span class='eff'><span class='constName'>Session</span></span>></pre></div><br /><div class='code'><pre>gsend : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, s : <span class='constName'>Protocol</span>} 
      . (<span class='constName'>Chan</span> (<span class='constName'>Send</span> a s)) -> a -> (<span class='constName'>Chan</span> s) <<span class='eff'><span class='constName'>Session</span></span>></pre></div><br /><div class='code'><pre>grecv : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, s : <span class='constName'>Protocol</span>} 
      . (<span class='constName'>Chan</span> (<span class='constName'>Recv</span> a s)) -> (a, <span class='constName'>Chan</span> s) <<span class='eff'><span class='constName'>Session</span></span>></pre></div><br /><div class='code'><pre>gclose : (<span class='constName'>Chan</span> <span class='constName'>End</span>) -> <span class='constName'>()</span> <<span class='eff'><span class='constName'>Session</span></span>></pre></div><br /><a name = filehandles><h3><a href='#' class='toplink'>[top]</a> File Handles</h3></a><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Handle</span> : <span class='constName'>HandleType</span> -> <span class='constName'>Type</span> <span class='keyword'>where</span>
    </pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>HandleType</span> <span class='keyword'>where</span>
    R 
  ; W 
  ; A 
  ; RW </pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>IOMode</span> : <span class='constName'>HandleType</span> -> <span class='constName'>Type</span> <span class='keyword'>where</span>
    ReadMode      : <span class='constName'>IOMode</span> <span class='constName'>R</span>
  ; WriteMode     : <span class='constName'>IOMode</span> <span class='constName'>W</span>
  ; AppendMode    : <span class='constName'>IOMode</span> <span class='constName'>A</span>
  ; ReadWriteMode : <span class='constName'>IOMode</span> <span class='constName'>RW</span></pre></div><br /><div class='code'><pre>openHandle : <span class='keyword'>forall</span> {m : <span class='constName'>HandleType</span>} 
           . (<span class='constName'>IOMode</span> m) -> <span class='constName'>String</span> -> (<span class='constName'>Handle</span> m) <<span class='eff'>{<span class='constName'>Open</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><div class='code'><pre>readChar : (<span class='constName'>Handle</span> <span class='constName'>R</span>) -> (<span class='constName'>Handle</span> <span class='constName'>R</span>, <span class='constName'>Char</span>) <<span class='eff'>{<span class='constName'>Read</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><div class='code'><pre>readChar' : (<span class='constName'>Handle</span> <span class='constName'>RW</span>) -> (<span class='constName'>Handle</span> <span class='constName'>RW</span>, <span class='constName'>Char</span>) <<span class='eff'>{<span class='constName'>Read</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><div class='code'><pre>appendChar : (<span class='constName'>Handle</span> <span class='constName'>A</span>) -> <span class='constName'>Char</span> -> (<span class='constName'>Handle</span> <span class='constName'>A</span>) <<span class='eff'>{<span class='constName'>Write</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><div class='code'><pre>writeChar : (<span class='constName'>Handle</span> <span class='constName'>W</span>) -> <span class='constName'>Char</span> -> (<span class='constName'>Handle</span> <span class='constName'>W</span>) <<span class='eff'>{<span class='constName'>Write</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><div class='code'><pre>writeChar' : (<span class='constName'>Handle</span> <span class='constName'>RW</span>) -> <span class='constName'>Char</span> -> (<span class='constName'>Handle</span> <span class='constName'>RW</span>) <<span class='eff'>{<span class='constName'>Write</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><div class='code'><pre>closeHandle : <span class='keyword'>forall</span> {m : <span class='constName'>HandleType</span>} 
            . (<span class='constName'>Handle</span> m) -> <span class='constName'>()</span> <<span class='eff'>{<span class='constName'>Close</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><div class='code'><pre>isEOF : (<span class='constName'>Handle</span> <span class='constName'>R</span>) -> (<span class='constName'>Handle</span> <span class='constName'>R</span>, <span class='constName'>Bool</span>) <<span class='eff'>{<span class='constName'>Read</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><div class='code'><pre>isEOF' : (<span class='constName'>Handle</span> <span class='constName'>RW</span>) -> (<span class='constName'>Handle</span> <span class='constName'>RW</span>, <span class='constName'>Bool</span>) <<span class='eff'>{<span class='constName'>Read</span>, <span class='constName'>IOExcept</span>}</span>></pre></div><br /><a name = char><h3><a href='#' class='toplink'>[top]</a> Char</h3></a><div class='code'><pre>charToInt : <span class='constName'>Char</span> -> <span class='constName'>Int</span></pre></div><br /><div class='code'><pre>charFromInt : <span class='constName'>Int</span> -> <span class='constName'>Char</span></pre></div><br /><div class='code'><pre>moveChar : <span class='constName'>Char</span> -> <span class='constName'>Char</span> [<span class='coeff'>(0 : <span class='constName'>Ext</span> <span class='constName'>Nat</span>)..<span class='constName'>∞</span></span>]</pre></div><br /><div class='code'><pre>moveInt : <span class='constName'>Int</span> -> <span class='constName'>Int</span> [<span class='coeff'>(0 : <span class='constName'>Ext</span> <span class='constName'>Nat</span>)..<span class='constName'>∞</span></span>]</pre></div><br /><div class='code'><pre>moveString : <span class='constName'>String</span> -> <span class='constName'>String</span> [<span class='coeff'>(0 : <span class='constName'>Ext</span> <span class='constName'>Nat</span>)..<span class='constName'>∞</span></span>]</pre></div><br /><a name = stringmanipulation><h3><a href='#' class='toplink'>[top]</a> String manipulation</h3></a><div class='code'><pre>stringAppend : <span class='constName'>String</span> -> <span class='constName'>String</span> -> <span class='constName'>String</span></pre></div><br /><div class='code'><pre>stringUncons : <span class='constName'>String</span> -> <span class='constName'>Maybe</span> (<span class='constName'>Char</span>, <span class='constName'>String</span>)</pre></div><br /><div class='code'><pre>stringCons : <span class='constName'>Char</span> -> <span class='constName'>String</span> -> <span class='constName'>String</span></pre></div><br /><div class='code'><pre>stringUnsnoc : <span class='constName'>String</span> -> <span class='constName'>Maybe</span> (<span class='constName'>String</span>, <span class='constName'>Char</span>)</pre></div><br /><div class='code'><pre>stringSnoc : <span class='constName'>String</span> -> <span class='constName'>Char</span> -> <span class='constName'>String</span></pre></div><br /><a name = cost><h3><a href='#' class='toplink'>[top]</a> Cost</h3></a><div class='code'><pre>tick : <span class='constName'>()</span> <<span class='eff'>1</span>></pre></div><br /><a name = uniquenessmodality><h3><a href='#' class='toplink'>[top]</a> Uniqueness modality</h3></a><div class='code'><pre>uniqueReturn : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, s : <span class='constName'>Coeffect</span>, r : s} 
             . (<span class='uniq'>*a</span>) -> a [<span class='coeff'>r</span>]</pre></div><br /><div class='code'><pre>reveal : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>} 
       . (a *<span class='uniq'><span class='constName'>Trusted</span></span>) -> a [<span class='coeff'><span class='constName'>Lo</span></span>]</pre></div><br /><div class='code'><pre>trustedBind : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, b : <span class='constName'>Type</span>} 
            . ((a *<span class='uniq'><span class='constName'>Trusted</span></span>) -> b [<span class='coeff'><span class='constName'>Lo</span></span>]) -> (a [<span class='coeff'><span class='constName'>Lo</span></span>]) -> b [<span class='coeff'><span class='constName'>Lo</span></span>]</pre></div><br /><div class='code'><pre>withBorrow : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, b : <span class='constName'>Type</span>} 
           . ((<span class='perm'>& 1 a</span>) -> <span class='perm'>& 1 b</span>) -> (<span class='uniq'>*a</span>) -> <span class='uniq'>*b</span></pre></div><br /><div class='code'><pre>split : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, f : <span class='constName'>Fraction</span>} 
      . {f ≠ <span class='constName'>Star</span>} =>
    (<span class='perm'>& f a</span>) -> (<span class='perm'>& (f * 1/2) a</span>, <span class='perm'>& (f * 1/2) a</span>)</pre></div><br /><div class='code'><pre>join : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, f : <span class='constName'>Fraction</span>, g : <span class='constName'>Fraction</span>} 
     . {f ≠ <span class='constName'>Star</span>, g ≠ <span class='constName'>Star</span>} =>
    (<span class='perm'>& f a</span>, <span class='perm'>& g a</span>) -> <span class='perm'>& (f + g) a</span></pre></div><br /><div class='code'><pre>borrowPush : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, b : <span class='constName'>Type</span>, p : <span class='constName'>Permission</span>, f : p} 
           . (<span class='perm'>& f (a, b)</span>) -> (<span class='perm'>& f a</span>, <span class='perm'>& f b</span>)</pre></div><br /><div class='code'><pre>borrowPull : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, b : <span class='constName'>Type</span>, p : <span class='constName'>Permission</span>, f : p} 
           . (<span class='perm'>& f a</span>, <span class='perm'>& f b</span>) -> <span class='perm'>& f (a, b)</span></pre></div><br /><a name = mutablearrayoperations><h3><a href='#' class='toplink'>[top]</a> Mutable array operations</h3></a><div class='code'><pre>newFloatArray : <span class='constName'>Int</span> -> <span class='keyword'>exists</span> {id : <span class='constName'>Name</span>} 
              . <span class='uniq'>*(<span class='constName'>FloatArray</span> id)</span></pre></div><br /><div class='code'><pre>readFloatArray : <span class='keyword'>forall</span> {p : <span class='constName'>Permission</span>, f : p, id : <span class='constName'>Name</span>} 
               . (<span class='perm'>& f (<span class='constName'>FloatArray</span> id)</span>) -> <span class='constName'>Int</span> -> (<span class='constName'>Float</span>, <span class='perm'>& f (<span class='constName'>FloatArray</span> id)</span>)</pre></div><br /><div class='code'><pre>writeFloatArray : <span class='keyword'>forall</span> {id : <span class='constName'>Name</span>, f : <span class='constName'>Fraction</span>} 
                . {mut f} =>
    (<span class='perm'>& f (<span class='constName'>FloatArray</span> id)</span>) -> <span class='constName'>Int</span> -> <span class='constName'>Float</span> -> <span class='perm'>& f (<span class='constName'>FloatArray</span> id)</span></pre></div><br /><div class='code'><pre>lengthFloatArray : <span class='keyword'>forall</span> {p : <span class='constName'>Permission</span>, f : p, id : <span class='constName'>Name</span>} 
                 . (<span class='perm'>& f (<span class='constName'>FloatArray</span> id)</span>) -> (<span class='coeff'>!<span class='constName'>Int</span></span>, <span class='perm'>& f (<span class='constName'>FloatArray</span> id)</span>)</pre></div><br /><div class='code'><pre>deleteFloatArray : <span class='keyword'>forall</span> {id : <span class='constName'>Name</span>} 
                 . (<span class='uniq'>*(<span class='constName'>FloatArray</span> id)</span>) -> <span class='constName'>()</span></pre></div><br /><div class='code'><pre>newRef : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>} 
       . a -> <span class='keyword'>exists</span> {id : <span class='constName'>Name</span>} . <span class='uniq'>*(<span class='constName'>Ref</span> id a)</span></pre></div><br /><div class='code'><pre>swapRef : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, f : <span class='constName'>Fraction</span>, id : <span class='constName'>Name</span>} 
        . {mut f} =>
    (<span class='perm'>& f (<span class='constName'>Ref</span> id a)</span>) -> a -> (a, <span class='perm'>& f (<span class='constName'>Ref</span> id a)</span>)</pre></div><br /><div class='code'><pre>freezeRef : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, id : <span class='constName'>Name</span>} 
          . (<span class='uniq'>*(<span class='constName'>Ref</span> id a)</span>) -> a</pre></div><br /><div class='code'><pre>readRef : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, s : <span class='constName'>Coeffect</span>, q : s, r : s, p : <span class='constName'>Permission</span>, f : p, id : <span class='constName'>Name</span>} 
        . (<span class='perm'>& f (<span class='constName'>Ref</span> id (a [<span class='coeff'>q + r</span>]))</span>) -> (a [<span class='coeff'>q</span>], <span class='perm'>& f (<span class='constName'>Ref</span> id (a [<span class='coeff'>r</span>]))</span>)</pre></div><br /><a name = imuutablearrayoperations><h3><a href='#' class='toplink'>[top]</a> Imuutable array operations</h3></a><div class='code'><pre>newFloatArrayI : <span class='keyword'>forall</span> {id : <span class='constName'>Name</span>} 
               . <span class='constName'>Int</span> -> <span class='constName'>FloatArray</span> id</pre></div><br /><div class='code'><pre>readFloatArrayI : <span class='keyword'>forall</span> {id : <span class='constName'>Name</span>} 
                . (<span class='constName'>FloatArray</span> id) -> <span class='constName'>Int</span> -> (<span class='constName'>Float</span>, <span class='constName'>FloatArray</span> id)</pre></div><br /><div class='code'><pre>writeFloatArrayI : <span class='keyword'>forall</span> {id : <span class='constName'>Name</span>} 
                 . (<span class='constName'>FloatArray</span> id) -> <span class='constName'>Int</span> -> <span class='constName'>Float</span> -> <span class='constName'>FloatArray</span> id</pre></div><br /><div class='code'><pre>lengthFloatArrayI : <span class='keyword'>forall</span> {id : <span class='constName'>Name</span>} 
                  . (<span class='constName'>FloatArray</span> id) -> (<span class='constName'>Int</span>, <span class='constName'>FloatArray</span> id)</pre></div><br /><a name = benchmarking><h3><a href='#' class='toplink'>[top]</a> Benchmarking</h3></a><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>BenchList</span> <span class='keyword'>where</span>
    BenchGroup <span class='constName'>String</span> <span class='constName'>BenchList</span> <span class='constName'>BenchList</span>
  ; Bench <span class='constName'>Int</span> <span class='constName'>String</span> ((<span class='constName'>Int</span> [<span class='coeff'>(0 : <span class='constName'>Ext</span> <span class='constName'>Nat</span>)..<span class='constName'>∞</span></span>]) -> <span class='constName'>()</span> <<span class='eff'>{<span class='constName'>Stdout</span>}</span>>) <span class='constName'>BenchList</span>
  ; Done </pre></div><br /><div class='code'><pre>mkIOBenchMain : <span class='constName'>BenchList</span> -> <span class='constName'>()</span> <<span class='eff'><span class='constName'>Pure</span></span>></pre></div><br /><a name = sensitivity><h3><a href='#' class='toplink'>[top]</a> Sensitivity</h3></a><div class='code'><pre>scale : (k : <span class='constName'>Float</span>) -> (<span class='constName'>DFloat</span> [<span class='coeff'>k</span>]) -> <span class='constName'>DFloat</span></pre></div><br /><div class='code'><pre><span class='keyword'>data</span> <span class='constName'>Capability</span> <span class='keyword'>where</span>
    Console 
  ; TimeDate </pre></div><br /><div class='code'><pre>cap : (c : <span class='constName'>Capability</span>) -> (<span class='constName'>()</span> [<span class='coeff'>{c}</span>]) -> <span class='constName'>CapabilityType</span> c</pre></div><br /><div class='code'><pre>drop : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>} 
     . {<span class='constName'>Dropable</span> a} =>
    a -> <span class='constName'>()</span></pre></div><br /><div class='code'><pre>copyShape : <span class='keyword'>forall</span> {a : <span class='constName'>Type</span>, f : <span class='constName'>Type</span> -> <span class='constName'>Type</span>} 
          . (f a) -> (f <span class='constName'>()</span>, f a)</pre></div><br /></section>
</div>
</body>
</html>